@using System.Web;
@using SFA.DAS.TeachInFurtherEducation.Contentful.Model.Interim;
@using SFA.DAS.TeachInFurtherEducation.Web.Services
@model PageContentModel

@inject Microsoft.AspNetCore.Http.IHttpContextAccessor HttpContextAccessor

@{
    ViewData["Title"] = $"{Model.PageTitle}{(Model.Preview.IsPreview ? " Preview" : "")}";
}

@section PreviewErrors {
    @await Html.PartialAsync("_PreviewErrorsPartial", Model.Preview)
}
@if (Model.PageComponents != null)
{
    @foreach (var component in Model.PageComponents)
    {
        switch (component)
        {
            case Preamble preamble:
                @await Html.PartialAsync("_PreambleGeneralPartial", new Tuple<Preamble?, Breadcrumbs?, bool, bool, string>(preamble, null, true, Model.Preview.IsPreview, Model.PageTemplate))
                break;
            case TileSection tileSection:
                //TODO: Below partial - clean up required
                //@await Html.PartialAsync("_TileSectionPartial", (tileSection, Model.Preview.IsPreview))
                @await Html.PartialAsync("_TileCardPartial", (tileSection, Model.Preview.IsPreview))
                break;
            case ImageCardBanner imageCardBanner:
                @await Html.PartialAsync("_ImageCardBannerPartial", imageCardBanner)
                break;
            case Video video:
                @await Html.PartialAsync("_VideoPartial", video)
                break;
            case NewsLetter newsLetter:
                @await Html.PartialAsync("_NewsLetterPartial", newsLetter)
                break;
            case ContactUs contactUs:
                @await Html.PartialAsync("_ContactUsPartial", contactUs)
                break;
            case ContentBox contentBox:
                @await Html.PartialAsync("_ContentBoxPartial", contentBox)
                break;
            case RichTextContents richTextContents:
                @await Html.PartialAsync("_RichTextContentsPartial", richTextContents)
                break;
            default:

                break;
        }
    }
}