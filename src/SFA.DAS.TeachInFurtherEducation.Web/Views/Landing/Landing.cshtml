@using System.Web;
@using SFA.DAS.TeachInFurtherEducation.Contentful.Model.Interim;
@using SFA.DAS.TeachInFurtherEducation.Web.Services
@model PageContentModel

@inject Microsoft.AspNetCore.Http.IHttpContextAccessor HttpContextAccessor

@{
    ViewData["Title"] = Model!= null ? $"{Model.PageTitle}{(Model.Preview.IsPreview ? " Preview" : "")}" : "";
}

@section PreviewErrors {
    @await Html.PartialAsync("_PreviewErrorsPartial", Model?.Preview)
}
@if (Model?.PageComponents != null)
{
    @foreach (var component in Model.PageComponents)
    {
        switch (component)
        {
            case Preamble preamble:
                @await Html.PartialAsync("_PreambleGeneralPartial", new Tuple<Preamble?, Breadcrumbs?, bool, bool, string>(preamble, Model.Breadcrumbs, true, Model.Preview.IsPreview, Model.PageTemplate))
                break;
            case TileSection tileSection:
                @await Html.PartialAsync("_TileCardPartial", (tileSection, Model.Preview.IsPreview))
                break;
            case ImageCardBanner imageCardBanner:
                @await Html.PartialAsync("_ImageCardBannerPartial", imageCardBanner)
                break;
            case Video video:
                @await Html.PartialAsync("_VideoPartial", video)
                break;
            case NewsLetter newsLetter:
                @await Component.InvokeAsync("Newsletter", newsLetter)
                break;
            case ContactUs contactUs:
                @await Html.PartialAsync("_ContactUsPartial", contactUs)
                break;
            case ContentBox contentBox:
                @await Html.PartialAsync("_ContentBoxPartial", contentBox)
                break;
            case RichTextContents richTextContents:
                @await Html.PartialAsync("_RichTextContentsPartial", richTextContents)
                break;
            case SupplierSearch supplierSearch:
                @await Component.InvokeAsync("SupplierSearch", supplierSearch)
                break;
            case FullImageCardBanner fullImageCardBanner:
                @await Html.PartialAsync("_FullImageCardBannerPartial", fullImageCardBanner)
                break;
            case HeaderFullImage headerFullImage:
                @await Html.PartialAsync("_HeaderFullImagePartial", headerFullImage)
                break;
            case LineSeparator lineSeparator:
                @await Html.PartialAsync("_LineSeparatorPartial", lineSeparator)
                break;

            default:

                break;
        }
    }
}